<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Unity WebGL | My Project</title>

<link rel="shortcut icon" href="TemplateData/favicon.ico">
<link rel="stylesheet" href="TemplateData/style.css">

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: black;
}

#unity-container {
  width: 100vw;
  height: 100vh;
}

#unity-canvas {
  width: 100%;
  height: 100%;
  display: block;
}

/* C·∫£nh b√°o xoay m√†n h√¨nh */
#rotate-warning {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: black;
  color: white;
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  font-size: 24px;
  text-align: center;
}
</style>
</head>

<body>

<div id="unity-container">
  <canvas id="unity-canvas" tabindex="-1"></canvas>

  <div id="unity-loading-bar">
    <div id="unity-logo"></div>
    <div id="unity-progress-bar-empty">
      <div id="unity-progress-bar-full"></div>
    </div>
  </div>

  <div id="unity-warning"></div>

  <div id="unity-footer">
    <div id="unity-logo-title-footer"></div>
    <div id="unity-fullscreen-button"></div>
    <div id="unity-build-title">My Project</div>
  </div>
</div>

<!-- Rotate Warning -->
<div id="rotate-warning">
  Vui l√≤ng xoay ngang m√†n h√¨nh üì±
</div>

<script>
var canvas = document.querySelector("#unity-canvas");

function unityShowBanner(msg, type) {
  var warningBanner = document.querySelector("#unity-warning");
  var div = document.createElement("div");
  div.innerHTML = msg;
  warningBanner.appendChild(div);

  if (type == "error")
    div.style = "background:red; padding:10px;";
  else
    div.style = "background:yellow; padding:10px;";

  setTimeout(() => {
    warningBanner.removeChild(div);
  }, 5000);
}

var buildUrl = "Build";
var loaderUrl = buildUrl + "/Game3.loader.js";

var config = {
  dataUrl: buildUrl + "/Game3.data",
  frameworkUrl: buildUrl + "/Game3.framework.js",
  codeUrl: buildUrl + "/Game3.wasm",
  streamingAssetsUrl: "StreamingAssets",
  companyName: "DefaultCompany",
  productName: "My Project",
  productVersion: "1.0",
  showBanner: unityShowBanner,
  matchWebGLToCanvasSize: true
};

document.querySelector("#unity-loading-bar").style.display = "block";

var script = document.createElement("script");
script.src = loaderUrl;

script.onload = () => {
  createUnityInstance(canvas, config, (progress) => {
    document.querySelector("#unity-progress-bar-full").style.width = 100 * progress + "%";
  }).then((unityInstance) => {

    document.querySelector("#unity-loading-bar").style.display = "none";

    document.querySelector("#unity-fullscreen-button").onclick = () => {
      unityInstance.SetFullscreen(1);
    };

  }).catch((message) => {
    alert(message);
  });
};

document.body.appendChild(script);

/* ===== Rotate Mobile Only ===== */

function isMobile() {
  return /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
}

function checkOrientation() {
  const warning = document.getElementById("rotate-warning");

  if (!isMobile()) {
    warning.style.display = "none";
    return;
  }

  if (window.innerHeight > window.innerWidth) {
    warning.style.display = "flex";
  } else {
    warning.style.display = "none";
  }
}

window.addEventListener("resize", checkOrientation);
checkOrientation();

</script>

</body>
</html>
